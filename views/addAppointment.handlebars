<!-- ... (other form elements) ... -->

<div class="mb-3">
    <label for="dentistId" class="form-label">Dentist</label>
    <select class="form-select" id="dentistId" name="DentistNo" required onchange="updateAvailableSlots()">
        {{#each dentists}}
        <option value="{{id}}">{{Name}}</option>
        {{/each}}
    </select>
</div>

<div class="mb-3">
    <label for="availableSlots" class="form-label">Available Slots</label>
    <select class="form-select" id="availableSlots" name="Time" required>
        <!-- Available slots will be dynamically populated here -->
    </select>
</div>

<button type="submit" class="btn btn-primary">Add Appointment</button>

<script>
    function updateAvailableSlots() {
        const selectedDentistId = document.getElementById('dentistId').value;

        // Fetch dentist availability based on the selected dentist ID
        // Replace the following fetch URL with your actual endpoint
        fetch(`/get-dentist-availability?dentistId=${selectedDentistId}`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            },
        })
        .then(response => response.json())
        .then(data => {
            // Update the available slots dropdown with the fetched data
            const availableSlotsDropdown = document.getElementById('availableSlots');
            availableSlotsDropdown.innerHTML = ''; // Clear previous options

            // Add new options based on the fetched availability data
            data.forEach(slot => {
                const option = document.createElement('option');
                option.value = slot.time;
                option.textContent = slot.time; // Replace with your desired time format
                availableSlotsDropdown.appendChild(option);
            });
        })
        .catch(error => console.error('Error fetching availability:', error));
    }
</script>
